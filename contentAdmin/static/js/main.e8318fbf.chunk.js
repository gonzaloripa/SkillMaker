(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(t,e,n){t.exports=n(230)},136:function(t,e,n){},227:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},228:function(t,e,n){},230:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(4),o=n.n(r),s=(n(136),n(12)),c=n(13),l=n(24),u=n(25),d=n(18),f=n(26),h=n(240),m=n(233);function g(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var p={cursor:"pointer",width:"100%",border:"1px solid",margin:"0 auto"},v=function(t){Object(l.a)(n,t);var e=g(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"generateMultiCard",value:function(t){var e=m.a.Meta,n=this.props.identificador,a=2===t?this.props.cantidad+" contents":"",r=this.generateStyles(t);return i.a.createElement(m.a,{key:t,style:r},i.a.createElement(e,{title:n,description:a}))}},{key:"generateCard",value:function(){var t=m.a.Meta,e=this.props.identificador,n=this.props.categoria;return this.props.available?i.a.createElement(m.a,{style:{width:"100%",border:"1px solid",margin:"0 auto"}},i.a.createElement(t,{title:e,description:n})):i.a.createElement(m.a,{style:{width:"100%",border:"1px solid",margin:"0 auto",backgroundColor:"red"}},i.a.createElement(t,{title:e,description:n}))}},{key:"generateFluxCard",value:function(){var t=m.a.Meta,e=this.props.identificador;return i.a.createElement(m.a,{style:p},i.a.createElement(t,{title:e,description:"Skill"}))}},{key:"generateStyles",value:function(t){return{position:"absolute",width:"100%",height:"95px",border:"1px solid",margin:"0 auto",top:10*t+"px",left:10*t+"px"}}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{onClick:this.props.onClick,draggable:!this.props.flux,className:"multicard-container"},this.props.flux?this.generateFluxCard():this.props.cantidad>1?[0,1,2].map(function(e,n){return t.generateMultiCard(n)}):this.generateCard())}}]),n}(i.a.Component),y=n(94),k=n(234),b=n(58),C=n(237),O=n(39);function D(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var x=function(t){Object(l.a)(n,t);var e=D(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={modalVisible:[],fluxInDiagram:[]},a}return Object(c.a)(n,[{key:"addFluxToDiagram",value:function(t){this.props.addFluxToDiagram(t),this.setState({modalVisible:!1,fluxInDiagram:Object(b.a)({},t.name,!0)})}},{key:"renderModal",value:function(t){var e=this;return i.a.createElement(C.a,{key:t.name,title:"Skill contents - "+t.name,visible:!0,onCancel:function(){return e.setState({modalVisible:!1})}},t.getOrderedContents().map(function(t,e){return i.a.createElement("div",{key:e},t.getName())}),i.a.createElement(O.a,{type:"primary",onClick:function(){return e.addFluxToDiagram(t)},disabled:this.state.fluxInDiagram[t.name]},"Editar"))}},{key:"showContents",value:function(t){this.setState({modalVisible:Object(b.a)({},t,!0)})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",null,null!=this.props.fluxes&&this.props.fluxes.map(function(e,n){return i.a.createElement("div",{key:n},t.state.modalVisible[n]&&t.renderModal(e),i.a.createElement(v,{disabled:t.state.fluxInDiagram[e.name],onClick:function(){return t.showContents(n)},flux:!0,key:n,identificador:e.name}))}))}}]),n}(i.a.Component),w=n(31),S=n.n(w);function j(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var L=function(t){Object(l.a)(n,t);var e=j(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={contentChanged:!1,selectedItem:"",hiddenCards:[]},a}return Object(c.a)(n,[{key:"selectCategory",value:function(t){var e=this;S.a.get("https://alexa-apirest.herokuapp.com/users/admin/contentsByCategory/"+t).then(function(n){if(n.data.length>0){var a=n.data;e.props.changeContents(a)}e.setState({selectedItem:t})})}},{key:"onContentDragEnd",value:function(t,e){if("none"!==t.dataTransfer.dropEffect){var n=this.state.hiddenCards;n.push(e.identificador),this.setState({hiddenCards:n}),""!==this.state.selectedItem?this.selectCategory(this.state.selectedItem):this.props.categories.length>0?this.selectCategory(this.props.categories[0]):this.selectCategory(S.a.get("https://alexa-apirest.herokuapp.com/users/getFirstCategory"))}}},{key:"onContentDragStart",value:function(t,e){t.dataTransfer.setData(JSON.stringify({contentId:e.contentId}),"contentId"),t.dataTransfer.setData(JSON.stringify({identificador:e.identificador}),"identificador"),t.dataTransfer.setData(JSON.stringify({categoria:e.categoria}),"categoria"),t.dataTransfer.setData(JSON.stringify({isNavegable:e.available}),"isNavegable")}},{key:"onContentClick",value:function(t,e){e.available||S.a.delete("https://alexa-apirest.herokuapp.com/users/deleteContentUnavailable",{params:{id:e.contentId}},function(t){window.open(e.url,"_blank"),window.location.reload()})}},{key:"generateStyles",value:function(t){return{position:"relative",width:"80%",border:"1px solid",margin:"0 auto",top:"5px"}}},{key:"render",value:function(){var t=this,e=y.a.TabPane,n=k.a.Option,a=this.generateStyles();return i.a.createElement("div",{className:"no-assigned__cards__container"},i.a.createElement(y.a,null,i.a.createElement(e,{tab:"Contents",key:"1"},this.props.categories.length>0&&i.a.createElement("div",null,i.a.createElement("h3",{style:{color:"white",left:"10px"}}," Search by category "),i.a.createElement(k.a,{value:this.state.selectedItem?this.state.selectedItem:void 0,placeholder:"Category",onChange:function(e){return t.selectCategory(e)},style:a},this.props.categories.map(function(t,e){return i.a.createElement(n,{key:e,value:t.toString()},t.toString())})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null)),this.props.contents.map(function(e,n){return i.a.createElement("div",{key:n,onDragStart:function(n){return t.onContentDragStart(n,e.contenidos)},onDragEnd:function(n){return t.onContentDragEnd(n,e.contenidos)},onClick:function(n){return t.onContentClick(n,e.contenidos)}},!t.state.hiddenCards.find(function(t){return t===e.contenidos.identificador})&&i.a.createElement(v,{identificador:e.contenidos.identificador,categoria:e.contenidos.categoria,cantidad:e.contenidos.contentId?e.contenidos.contentId.length:null,available:e.contenidos.available}))})),i.a.createElement(e,{tab:"Skills",key:"2"},i.a.createElement(x,{fluxes:this.props.fluxes,addFluxToDiagram:this.props.addFluxToDiagram}))))}}]),n}(i.a.Component),E=n(95),N=n(124),R=n(21),T=n.n(R),I=n(238),M=n(239),F=n(241),V=n(235),A=n(236),P=n(9),B=n(232),J=function(){function t(e,n,a,i){Object(s.a)(this,t),this.name=e,this.idContent=n,this.category=a,this.metadata={}}return Object(c.a)(t,[{key:"getName",value:function(){return this.name}},{key:"getIdContent",value:function(){return this.idContent}},{key:"getCategory",value:function(){return this.category}},{key:"setName",value:function(t){this.name=t}},{key:"setIdContent",value:function(t){this.idContent=t}},{key:"setCategory",value:function(t){this.category=t}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){var e=this;Object.keys(t).map(function(n){return e.metadata[n]=t[n]})}},{key:"hasName",value:function(t){return this.getName().toLowerCase()===t.toLowerCase()}}]),t}();function W(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var G=function(t){Object(l.a)(n,t);var e=W(n);function n(t,a,i,r){var o;return Object(s.a)(this,n),(o=e.call(this,t,a,i)).order=r,o}return Object(c.a)(n,[{key:"getOrder",value:function(){return this.order}},{key:"setOrder",value:function(t){this.order=t}}]),n}(J);function _(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var H=function(t){Object(l.a)(n,t);var e=_(n);function n(t,a,i,r){var o;return Object(s.a)(this,n),(o=e.call(this,t,a,i)).isNavegable=r,o}return Object(c.a)(n,[{key:"getisNavegable",value:function(){return this.isNavegable}},{key:"setIsNavegable",value:function(t){this.isNavegable=t}}]),n}(J),Y=function(){function t(e,n){Object(s.a)(this,t),this.origin=e,this.destination=n}return Object(c.a)(t,[{key:"getOriginContent",value:function(){return this.origin}},{key:"getDestinationContent",value:function(){return this.destination}},{key:"setOriginContent",value:function(t){this.origin=t}},{key:"setDestinationContent",value:function(t){this.destination=t}},{key:"hasOrigin",value:function(t){return this.origin.toLowerCase()===t.toLowerCase()}},{key:"hasDestination",value:function(t){return this.destination.toLowerCase()===t.toLowerCase()}},{key:"hasOriginAndDestination",value:function(t,e){return this.hasOrigin(t)&&this.hasDestination(e)}}]),t}(),z=function(){function t(){Object(s.a)(this,t)}return Object(c.a)(t,[{key:"getOrderedContents",value:function(t,e){var n=this,a=this.getFirstContent(t,e),i=a,r=[a];return e.map(function(a){var o=n.getLinkWithOrigin(e,i);i=n.getContentByName(o.destination,t),r.push(i)}),r}},{key:"getFirstContent",value:function(t,e){return t.filter(function(t){return 0===e.filter(function(e){return e.destination.toLowerCase()===t.getName().toLowerCase()}).length&&1===e.filter(function(e){return e.origin.toLowerCase()===t.getName().toLowerCase()}).length})[0]}},{key:"getLinkWithOrigin",value:function(t,e){return t.filter(function(t){return t.origin.toLowerCase()===e.getName().toLowerCase()})[0]}},{key:"getContentByName",value:function(t,e){return e.filter(function(e){return e.hasName(t)})[0]}}]),t}(),X=function(){function t(){Object(s.a)(this,t)}return Object(c.a)(t,[{key:"getOrderedContents",value:function(t,e){return t.sort(function(t,e){return t.getOrder()-e.getOrder()})}}]),t}(),K=function(){function t(e){switch(Object(s.a)(this,t),e){case"rendered":this.currentState=new z;break;default:this.currentState=new X}}return Object(c.a)(t,[{key:"changeState",value:function(t){this.currentState="rendered"===t?new z:new X}},{key:"getOrderedContents",value:function(t,e){return this.currentState.getOrderedContents(t,e)}}]),t}(),U=function(){function t(e,n,a){return Object(s.a)(this,t),this.name=e,this.contents=n?n.map(function(t){return new G(t.identificador,t.contentId,t.categoria,t.order)}):[],this.links=a||[],this.state=new K,this}return Object(c.a)(t,[{key:"addLink",value:function(t){this.links.push(t)}},{key:"removeLink",value:function(t){this.setLinks(function(e){return e!==t})}},{key:"getLinks",value:function(){return this.links}},{key:"setLinks",value:function(t){this.links=t}},{key:"getContents",value:function(){return this.contents}},{key:"addContent",value:function(t){this.contents.push(t)}},{key:"setContents",value:function(t){this.contents=t}},{key:"removeContent",value:function(t){this.setContents(this.contents.filter(function(e){return!e.hasName(t)}))}},{key:"getOrderedLinks",value:function(){var t=this,e=[];return this.getOrderedContents().map(function(n,a){if(t.getOrderedContents()[a+1]){var i=n.getName(),r=t.getOrderedContents()[a+1].getName();e.push(new Y(i,r))}}),this.links=e,e}},{key:"relink",value:function(t,e){var n=e.fromNode.data.key,a=e.toNode.data.key;this.links.filter(function(e){return e.hasOriginAndDestination(n,t)}).length>0?this.removeLinkWithOriginAndDestination(n,t):this.links.filter(function(e){return e.hasOriginAndDestination(t,n)}).length>0&&this.removeLinkWithOriginAndDestination(t,a),this.addLink(new Y(n,a))}},{key:"getOrderedContents",value:function(){return this.state.getOrderedContents(this.contents,this.links)}},{key:"removeLinkWithOrigin",value:function(t){this.setLinks(this.links.filter(function(e){return!e.hasOrigin(t)}))}},{key:"removeLinkWithDestination",value:function(t){this.setLinks(this.links.filter(function(e){return!e.hasDestination(t)}))}},{key:"removeLinkWithOriginAndDestination",value:function(t,e){this.setLinks(this.links.filter(function(n){return!n.hasOriginAndDestination(t,e)}))}},{key:"addLinkWithOriginAndDestination",value:function(t,e){this.addLink(new Y(t,e))}},{key:"changeState",value:function(t){this.state.changeState(t)}},{key:"getContentByName",value:function(t){return this.contents.filter(function(e){return e.hasName(t)})[0]}}]),t}();function $(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var q=T.a.GraphObject.make,Q=function(t){Object(l.a)(n,t);var e=$(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).success=function(){I.a.success("A new skill was created!",3,function(){window.location.reload()})},a.error=function(){I.a.error("Some error occurred when trying to make a new skill",3)},a.onChangeInputText=function(t){a.setState({inputValueText:t.target.value})},a.onChangeRadioNode=function(t){a.setState({valueRadioNode:t.target.value})},a.onChangeCheckLink=function(t){a.setState({valueCheck:t.target.checked})},a.confirmNodeModal=function(){var t=a.state.temporaryContent;a.state.flux.getContentByName(t).setData({pattern:a.state.valueRadioNode}),a.setState({modalNodeVisible:!1,temporaryContent:null,valueRadioNode:null})},a.confirmLinkModal=function(){var t=a.state.temporaryLink;a.state.flux.getContentByName(t).setData({metaInfo:a.state.inputValueText,next:a.state.valueRadioLink}),a.setState({modalLinkVisible:!1,inputValueText:null,temporaryLink:null})},a.renderCanvas=a.renderCanvas.bind(Object(f.a)(a)),a.state={keyForRerender:0,flux:null,temporaryContent:null,temporaryLink:null,valueRadioNode:null,valueCheck:!1,modalLinkVisible:!1,modalNodeVisible:!1,contents:[],myModel:null,myDiagram:null,loading:!1,success:null,error:null,modalVisible:!1,inputValue:null,inputValueText:null,showSend:!1,pattern:null,index:null,addedContents:[],patterns:["Read paragraph by paragraph","Read a summary"],infoPatterns:["If the text of the contents defined is long, it will be read paragraph by paragraph","If the text of the contents defined is long, will be read a summary of it"]},a.onDiagramEnter=a.onDiagramEnter.bind(Object(f.a)(a)),a.onDiagramDrop=a.onDiagramDrop.bind(Object(f.a)(a)),a.onDragOver=a.onDragOver.bind(Object(f.a)(a)),a.sendData=a.sendData.bind(Object(f.a)(a)),a.renderCanvas=a.renderCanvas.bind(Object(f.a)(a)),a.showSendDataModal=a.showSendDataModal.bind(Object(f.a)(a)),a.onChangeInput=a.onChangeInput.bind(Object(f.a)(a)),a.generateNodeTemplate=a.generateNodeTemplate.bind(Object(f.a)(a)),a.generateLinkTemplate=a.generateLinkTemplate.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(t){t.shouldShowFlux===this.props.shouldShowFlux&&t.flux===this.props.flux||(this.addContentsManually(t.flux),console.log(this.state))}},{key:"componentDidMount",value:function(){this.renderCanvas()}},{key:"handlePattern",value:function(t){var e;switch(t){case"Read paragraph by paragraph":e=0;break;case"Read a summary":e=1}this.setState({pattern:t,index:e})}},{key:"generateNodeTemplate",value:function(){var t=this;return q(T.a.Node,"Auto",{doubleClick:function(e,n){var a=n.data.key;t.setState({modalNodeVisible:!0,temporaryContent:a})}},new T.a.Binding("location"),q(T.a.Shape,"RoundedRectangle",{portId:"",fromLinkable:!0,toLinkable:!0,toMaxLinks:1,fromMaxLinks:1,toLinkableSelfNode:!1},new T.a.Binding("fill","color")),q(T.a.TextBlock,{margin:6,font:"18px sans-serif"},new T.a.Binding("text","identificador")))}},{key:"generateLinkTemplate",value:function(){var t=this;return q(T.a.Link,{curve:T.a.Link.Bezier},{doubleClick:function(e,n){var a=n.toNode.data.key;t.setState({modalLinkVisible:!0,temporaryLink:a})}},{relinkableFrom:!0,relinkableTo:!0},q(T.a.Shape),q(T.a.Shape,{toArrow:"OpenTriangle",fill:null}))}},{key:"renderCanvas",value:function(){var t=this,e=q(T.a.TreeModel),n=q(T.a.Diagram,this.refs.goJsDiv,{initialContentAlignment:T.a.Spot.Center});n.addDiagramListener("LinkDrawn",function(e){t.state.flux.addLinkWithOriginAndDestination(e.subject.fromNode.data.key,e.subject.toNode.data.key),t.setState({keyForRerender:Math.random()})}),n.addDiagramListener("LinkRelinked",function(e){t.state.flux.relink(e.parameter.part.key,e.subject)}),n.addDiagramListener("SelectionDeleted",function(e){e.subject.first().Yd.from?(t.state.flux.removeLinkWithOriginAndDestination(e.subject.first().Yd.from,e.subject.first().Yd.to),t.setState({keyForRerender:Math.random()})):(t.state.flux.removeContent(e.subject.first().part.data.key),t.state.flux.removeLinkWithOrigin(e.subject.first().part.data.key),t.state.flux.removeLinkWithDestination(e.subject.first().part.data.key),t.setState({keyForRerender:Math.random()}))}),this.setModelAndDiagram(e,n)}},{key:"showSendDataModal",value:function(){this.setState({modalVisible:!0})}},{key:"sendData",value:function(){var t=this;this.state.flux.changeState("rendered");var e=this.state.flux.getOrderedContents();this.setState({loading:!0});var n={nombreConjunto:this.state.inputValue,pattern:this.state.pattern,contents:e};S.a.post("https://alexa-apirest.herokuapp.com/users/createFlow",n).then(function(){t.setState({loading:!1,success:"success",showSend:!1})}).catch(function(e){e.response&&e.response.data?t.setState({loading:!1,error:e.response.data},t.setState({error:null})):console.log(e)}),this.setState({modalVisible:!1})}},{key:"setModelAndDiagram",value:function(t,e){e.model=new T.a.GraphLinksModel([],[]),e.nodeTemplate=this.generateNodeTemplate(),e.linkTemplate=this.generateLinkTemplate(),e.validCycle=T.a.Diagram.CycleDestinationTree,this.setState({myModel:t,myDiagram:e})}},{key:"onDiagramEnter",value:function(t){t.preventDefault()}},{key:"getFlowContent",value:function(t){return new G(t.identificador,t.contentId,t.categoria,t.order)}},{key:"getDroppableContent",value:function(t){var e=JSON.parse(t[0].type),n=JSON.parse(t[1].type),a=JSON.parse(t[2].type),i=JSON.parse(t[3].type),r=Object(N.a)({},e,n,a,i);return new H(r.identificador,r.contentid,r.categoria,r.isnavegable)}},{key:"isNotInDiagram",value:function(t){return!this.state.addedContents.some(function(e){return JSON.stringify(e.getIdContent())===JSON.stringify(t.getIdContent())})}},{key:"doesLinkApplies",value:function(t,e){return!e.some(function(e){return t.origin.toLowerCase()===e.getName().toLowerCase()||t.destination.toLowerCase()===e.getName().toLowerCase()})}},{key:"addContentToGoJsDiagram",value:function(t,e,n){this.state.myDiagram.startTransaction("new node"),this.state.myDiagram.model.addNodeData({key:t.getName(),location:n,identificador:""!==e?e+" - "+t.getName():t.getName(),color:T.a.Brush.randomColor()}),this.state.myDiagram.commitTransaction("new node")}},{key:"addLinkToGoJsDiagram",value:function(t){this.state.myDiagram.startTransaction("new link"),this.state.myDiagram.model.addLinkDataCollection([{from:t.origin,to:t.destination}]),this.state.myDiagram.commitTransaction("new link")}},{key:"addContentsManually",value:function(t){var e=this,n=new U(t.name),a=this.state.addedContents;t.getOrderedContents().map(function(a,i){if(e.isNotInDiagram(a)){n.addContent(a);var r=e.state.myDiagram.transformViewToDoc(new T.a.Point(300+100*i,100+100*i));e.addContentToGoJsDiagram(a,t.name,r),e.setState(function(t){return{addedContents:[].concat(Object(E.a)(t.addedContents),[a])}})}}),t.getOrderedLinks().map(function(t){e.doesLinkApplies(t,a)&&(e.addLinkToGoJsDiagram(t),n.addLink(t))}),this.state.flux&&(this.state.flux.contents.map(function(t){return n.addContent(t)}),this.state.flux.links.map(function(t){return n.addLink(t)})),this.setState({flux:n,inputValue:t.name})}},{key:"calculateDroppedPoint",value:function(t){window.PIXELRATIO=this.state.myDiagram.computePixelRatio();var e=window.PIXELRATIO,n=t.target;if(n instanceof HTMLCanvasElement){var a=n.getBoundingClientRect(),i=a.width;0===i&&(i=.001);var r=a.height;0===r&&(r=.001);var o=t.clientX-a.left*(n.width/e/i),s=t.clientY-a.top*(n.height/e/r);return this.state.myDiagram.transformViewToDoc(new T.a.Point(o,s))}}},{key:"onDiagramDrop",value:function(t){var e=this.getDroppableContent(t.dataTransfer.items);if(this.isNotInDiagram(e)){if(null===this.state.flux){var n=new U("new flow");n.addContent(e),this.setState({flux:n})}else this.state.flux.addContent(e);var a=this.calculateDroppedPoint(t),i=this.state.contents;i.push(e),this.setState({contents:i}),this.addContentToGoJsDiagram(e,"",a),this.setState(function(t){return{addedContents:[].concat(Object(E.a)(t.addedContents),[e])}})}}},{key:"onDragOver",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"onChangeInput",value:function(t){this.setState({inputValue:t.target.value})}},{key:"nodeModal",value:function(){var t=this;M.a.Group;return i.a.createElement(C.a,{title:"Node",centered:!0,visible:this.state.modalNodeVisible,onOk:this.confirmNodeModal,onCancel:function(){return t.setState({modalNodeVisible:!1,valueRadioNode:null,temporaryContent:null})}},i.a.createElement("div",null,i.a.createElement("p",null,"Reading options:"),i.a.createElement(F.a.Group,{options:["Title","Rating","Storyline"],defaultValue:["Title"],onChange:this.onChangeRadioNode})))}},{key:"linkModal",value:function(){var t=this,e=M.a.Group,n={display:"block",height:"30px",lineHeight:"30px"};return i.a.createElement(C.a,{title:"Link",visible:this.state.modalLinkVisible,onOk:this.confirmLinkModal,onCancel:function(){return t.setState({modalLinkVisible:!1})}},i.a.createElement("div",null,i.a.createElement("p",null,"How to continue?"),i.a.createElement(F.a,{onChange:this.onChangeCheckLink},"Read previous text",!0===this.state.valueCheck?i.a.createElement(V.a,{placeholder:"Text",onChange:this.onChangeInputText,style:{width:100,marginLeft:10}}):null),i.a.createElement(e,{onChange:this.onChangeRadioNode,value:1},i.a.createElement(M.a,{style:n,value:1},"Read the next content directly"),i.a.createElement(M.a,{style:n,value:2},"Ask for reading next"))))}},{key:"submitModal",value:function(){var t=this,e=k.a.Option,n=A.a.Panel;return i.a.createElement(C.a,{title:"Confirm action",visible:this.state.modalVisible,onOk:this.sendData,onCancel:function(){return t.setState({modalVisible:!1})}},i.a.createElement("div",null,"Please, entrer a name for the set of contents to send",i.a.createElement(V.a,{value:this.state.inputValue,style:{width:"100px",marginLeft:"170px",marginTop:"20px"},onChange:this.onChangeInput}),i.a.createElement("p",null," Select a content reading pattern "),i.a.createElement(k.a,{value:this.state.pattern?this.state.pattern:void 0,placeholder:"Reading patterns",onChange:function(e){return t.handlePattern(e)},style:{width:"230px",marginLeft:"130px"}},this.state.patterns.map(function(t,n){return i.a.createElement(e,{key:n,value:t},t)})),this.state.pattern&&i.a.createElement(A.a,{bordered:!1,defaultActiveKey:["0"],expandIcon:function(t){var e=t.isActive;return i.a.createElement(P.a,{type:"caret-right",rotate:e?90:0}," ")}},i.a.createElement(n,{header:this.state.pattern,key:"0",style:{background:"#f7f7f7",borderRadius:4,marginBottom:24,border:0,overflow:"hidden",marginTop:"20px"}},i.a.createElement("p",{style:{paddingLeft:24}}," ",this.state.infoPatterns[this.state.index]," ")))))}},{key:"render",value:function(){console.log(this.state.flux);return i.a.createElement("div",null,this.state.loading&&i.a.createElement("div",{className:"example"},i.a.createElement(B.a,{className:"diagram-spin",size:"large"})),i.a.createElement("div",{onDragEnter:this.onDiagramEnter,className:"diagram",onDrop:this.onDiagramDrop,onDragOver:this.onDragOver},i.a.createElement("div",{ref:"goJsDiv",style:{width:"116%",height:"874px",backgroundColor:"white",marginLeft:"-16%"}})),i.a.createElement("div",{className:"sendButtonContainer"},this.state.success?this.success():null,i.a.createElement(O.a,{className:"sendButton",onClick:this.showSendDataModal,key:this.state.keyForRerender,disabled:!this.state.flux||this.state.flux&&this.state.flux.contents.length!==this.state.flux.links.length+1},"Deploy to skill"),this.state.error&&this.error()),this.nodeModal(),this.linkModal(),this.submitModal())}}]),n}(a.Component);function Z(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var tt=function(t){Object(l.a)(n,t);var e=Z(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={showFluxContent:!1,diagramFluxId:!1,categories:[],contents:[],fluxes:[]},a.changeContents=a.changeContents.bind(Object(f.a)(a)),a.addFluxToDiagram=a.addFluxToDiagram.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;S.a.get("https://alexa-apirest.herokuapp.com/users/categories").then(function(e){e.data.length>0&&t.setState({categories:e.data})}),S.a.get("https://alexa-apirest.herokuapp.com/users/admin/contentsByFirstCategory").then(function(e){e.data.length>0&&t.setState({contents:e.data})}),S.a.get("https://alexa-apirest.herokuapp.com/users/admin/contentsAndFlows").then(function(e){var n;e.data.length>0&&(n=e.data.map(function(t){return new U(t._id,t.contenidos)})),t.setState({fluxes:n})})}},{key:"changeContents",value:function(t){this.setState({contents:t})}},{key:"addFluxToDiagram",value:function(t){this.setState({showFluxContent:!0,diagramFlux:t})}},{key:"render",value:function(){var t=h.a.Header,e=h.a.Sider,n=h.a.Content;return i.a.createElement("div",null,i.a.createElement(h.a,{style:{height:"1000px"}},i.a.createElement(e,null,this.state.contents.length>0&&i.a.createElement(L,{changeContents:this.changeContents,contents:this.state.contents,fluxes:this.state.fluxes,addFluxToDiagram:this.addFluxToDiagram,categories:this.state.categories})),i.a.createElement(h.a,null,i.a.createElement(t,{style:{color:"white",fontSize:"20px"}},"SkillMaker"),i.a.createElement(n,null,i.a.createElement(Q,{shouldShowFlux:this.state.showFluxContent,flux:this.state.diagramFlux}))),i.a.createElement(e,null)))}}]),n}(i.a.Component);n(227),n(228),n(229);function et(t){return function(){var e,n=Object(d.a)(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(u.a)(this,e)}}var nt=function(t){Object(l.a)(n,t);var e=et(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(tt,null))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[131,1,2]]]);
//# sourceMappingURL=main.e8318fbf.chunk.js.map