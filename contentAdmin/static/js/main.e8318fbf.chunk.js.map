{"version":3,"sources":["../../../Proyectos/contentAdmin/src/logo.svg","../../../Proyectos/contentAdmin/src/components/MultiCard.js","../../../Proyectos/contentAdmin/src/components/FluxTab.js","../../../Proyectos/contentAdmin/src/components/LeftPanel.js","../../../Proyectos/contentAdmin/src/classes/Content.js","../../../Proyectos/contentAdmin/src/classes/FlowContent.js","../../../Proyectos/contentAdmin/src/classes/DroppableContent.js","../../../Proyectos/contentAdmin/src/classes/Link.js","../../../Proyectos/contentAdmin/src/classes/RenderedState.js","../../../Proyectos/contentAdmin/src/classes/ImportedState.js","../../../Proyectos/contentAdmin/src/classes/FlowState.js","../../../Proyectos/contentAdmin/src/classes/Flow.js","../../../Proyectos/contentAdmin/src/components/Diagram.js","../../../Proyectos/contentAdmin/src/components/ContentAdmin.js","../../../Proyectos/contentAdmin/src/components/App.js","../../../Proyectos/contentAdmin/src/serviceWorker.js","../../../Proyectos/contentAdmin/src/index.js"],"names":["module","exports","__webpack_require__","p","fluxCard","cursor","width","border","margin","MultiCard","index","Meta","Card","title","this","props","identificador","description","cantidad","styles","generateStyles","react_default","a","createElement","card","key","style","categoria","available","backgroundColor","position","height","top","left","_this","onClick","draggable","flux","className","generateFluxCard","map","number","generateMultiCard","generateCard","React","Component","FluxTab","Object","classCallCheck","_super","call","state","modalVisible","fluxInDiagram","addFluxToDiagram","setState","defineProperty","name","_this2","modal","visible","onCancel","getOrderedContents","content","i","getName","es_button","type","disabled","_this3","fluxes","renderModal","MultiCard_MultiCard","showContents","LeftPanel","contentChanged","selectedItem","hiddenCards","value","axios","get","then","response","data","length","contents","changeContents","event","dataTransfer","dropEffect","push","selectCategory","categories","setData","JSON","stringify","contentId","isNavegable","delete","params","id","window","open","url","location","reload","TabPane","Tabs","Option","Select","tabs","tab","color","es_select","undefined","placeholder","onChange","e","category","toString","onDragStart","onContentDragStart","contenidos","onDragEnd","onContentDragEnd","onContentClick","find","hiddenCard","FluxTab_FluxTab","Content","idContent","metadata","keys","k","toLowerCase","FlowContent","order","DroppableContent","Link","origin","destination","hasOrigin","hasDestination","RenderedState","links","firstContent","getFirstContent","nextContent","orderedContents","link","auxLink","getLinkWithOrigin","getContentByName","filter","hasName","ImportedState","sort","content1","content2","getOrder","FlowState","currentState","Flow","setLinks","fluxLink","setContents","discardedNodeKey","subject","subjectFromLinkKey","fromNode","subjectToLinkKey","toNode","hasOriginAndDestination","removeLinkWithOriginAndDestination","addLink","from","to","changeState","goObj","go","GraphObject","make","GoJs","success","message","error","onChangeInputText","inputValueText","target","onChangeRadioNode","valueRadioNode","onChangeCheckLink","checkedValue","valueCheck","checked","confirmNodeModal","contentNode","temporaryContent","pattern","modalNodeVisible","confirmLinkModal","temporaryLink","metaInfo","next","valueRadioLink","modalLinkVisible","renderCanvas","bind","assertThisInitialized","keyForRerender","myModel","myDiagram","loading","inputValue","showSend","addedContents","patterns","infoPatterns","onDiagramEnter","onDiagramDrop","onDragOver","sendData","showSendDataModal","onChangeInput","generateNodeTemplate","generateLinkTemplate","shouldShowFlux","addContentsManually","console","log","handlerThis","Node","doubleClick","node","Binding","Shape","portId","fromLinkable","toLinkable","toMaxLinks","fromMaxLinks","toLinkableSelfNode","TextBlock","font","curve","Bezier","relinkableFrom","relinkableTo","toArrow","fill","model","TreeModel","diagram","Diagram","refs","goJsDiv","initialContentAlignment","Spot","Center","addDiagramListener","ev","addLinkWithOriginAndDestination","Math","random","relink","parameter","part","first","Yd","removeContent","removeLinkWithOrigin","removeLinkWithDestination","setModelAndDiagram","contentsToSend","nombreConjunto","post","catch","GraphLinksModel","nodeTemplate","linkTemplate","validCycle","CycleDestinationTree","preventDefault","properties","parsedContent1","parse","parsedContent2","parsedContent3","parsedContent4","objectSpread","contentid","isnavegable","some","addedContent","getIdContent","oldContents","fluxName","point","startTransaction","addNodeData","Brush","randomColor","commitTransaction","addLinkDataCollection","_this4","newFlux","isNotInDiagram","addContent","transformViewToDoc","Point","addContentToGoJsDiagram","prevState","concat","toConsumableArray","getOrderedLinks","doesLinkApplies","addLinkToGoJsDiagram","PIXELRATIO","computePixelRatio","pixelratio","can","HTMLCanvasElement","bbox","getBoundingClientRect","bbw","bbh","mx","clientX","my","clientY","getDroppableContent","items","calculateDroppedPoint","stopPropagation","_this5","Radio","Group","centered","onOk","es_checkbox","options","defaultValue","_this6","RadioGroup","radioStyle","display","lineHeight","input","marginLeft","es_radio","_this7","Panel","Collapse","marginTop","handlePattern","collapse","bordered","defaultActiveKey","expandIcon","_ref","isActive","icon","rotate","header","background","borderRadius","marginBottom","overflow","paddingLeft","spin","size","onDragEnter","onDrop","ref","nodeModal","linkModal","submitModal","ContentAdmin","showFluxContent","diagramFluxId","_id","newContents","diagramFlux","Header","Layout","Sider","layout","LeftPanel_LeftPanel","fontSize","Diagram_GoJs","App","ContentAdmin_ContentAdmin","Boolean","hostname","match","ReactDOM","render","src_components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e8318fbf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react';\nimport { Card } from 'antd';\n\n\nlet fluxCard = { \n  cursor:\"pointer\", \n  width:\"100%\",\n  border:\"1px solid\", \n  margin:\"0 auto\" \n}\n\nexport default class MultiCard extends React.Component{\n\n  generateMultiCard(index){\n    const { Meta } = Card;\n    const title = this.props.identificador \n    const description = index === 2 ? (this.props.cantidad + \" contents\") : \"\"\n    const styles = this.generateStyles(index)\n    return(\n      <Card key={index} style={styles}>\n        <Meta title={title} description={description} />\n      </Card>\n    )\n  }\n  \n  generateCard(){\n    const { Meta } = Card;\n    const title = this.props.identificador;\n    const description = this.props.categoria;\n    var isAvailable = this.props.available\n    return(\n      (isAvailable) ?\n      <Card style={{ width:\"100%\",border:\"1px solid\", margin:\"0 auto\" }}>\n        <Meta title={title} description={description}/>\n      </Card>\n      :\n      <Card style={{ width:\"100%\",border:\"1px solid\", margin:\"0 auto\", backgroundColor: \"red\" }}>\n        <Meta title={title} description={description}/>\n      </Card>\n    )\n  }\n  \n  generateFluxCard(){\n    const { Meta } = Card;\n    const title = this.props.identificador;\n    const description = \"Skill\";\n    return(\n        <Card \n          style={fluxCard}>\n          <Meta title={title} description={description}/>\n        </Card>\n    )\n  }\n\n  generateStyles(index){\n    return(\n      {\n        position:\"absolute\",\n        width:\"100%\",\n        height:\"95px\",\n        border:\"1px solid\",\n        margin:\"0 auto\",\n        top:(10 * index) + \"px\",\n        left:(10 * index) + \"px\"\n      }   \n    ) \n  }\n  \n\n  render(){\n    return(\n      <div onClick={this.props.onClick} draggable={!this.props.flux} className=\"multicard-container\">\n        {this.props.flux ? \n          this.generateFluxCard()\n        :\n        this.props.cantidad > 1 ?\n          [0,1,2].map((number,index) => \n            this.generateMultiCard(index)\n          )\n        :\n          this.generateCard()\n        }\n      </div>\n    )\n  }\n\n}","import React from 'react'\nimport MultiCard from \"./MultiCard.js\"\nimport {Modal,Button} from 'antd'\n\nexport default class FluxTab extends React.Component{\n\n\n  constructor(props){\n    super(props)\n    this.state = { \n      modalVisible:[],\n      fluxInDiagram:[]\n    }\n  }\n\n  addFluxToDiagram(flux){\n    this.props.addFluxToDiagram(flux);\n    this.setState({\n      modalVisible:false,\n      fluxInDiagram:{\n        [flux.name]:true\n      }\n    })\n  }\n\n\n  renderModal(flux){\n    return(\n      <Modal\n        key={flux.name}\n        title={\"Skill contents - \" + flux.name}\n        visible={true}\n        onCancel={() => this.setState({modalVisible:false})}\n      >\n        {flux.getOrderedContents().map( (content,i) => \n          <div key={i}>{content.getName()}</div>\n        )}\n        <Button \n          type=\"primary\" \n          onClick={() => this.addFluxToDiagram(flux)}\n          disabled={this.state.fluxInDiagram[flux.name]}\n        >\n          Editar\n        </Button>\n      </Modal>\n    )\n  }\n\n  showContents(index){\n    this.setState({\n      modalVisible:{\n        [index]:true\n      }\n    })\n  }\n\n  render(){\n    return(\n      <div>\n          {this.props.fluxes != null && this.props.fluxes.map( (flux,i) =>\n            <div key={i}> \n              {this.state.modalVisible[i] && this.renderModal(flux)}\n              <MultiCard\n                disabled={this.state.fluxInDiagram[flux.name]}\n                onClick={() => this.showContents(i)}\n                flux={true}\n                key={i}\n                identificador={flux.name}\n              />\n            </div>\n          )}\n      </div>\n    )\n  }\n}","import React from 'react'\nimport MultiCard from \"./MultiCard.js\"\nimport { Tabs, Select } from 'antd';\nimport FluxTab from './FluxTab.js';\nimport axios from 'axios'\n\n\nexport default class LeftPanel extends React.Component {\n  constructor(props){\n      super(props)\n      this.state = {\n        contentChanged:false,\n        selectedItem:\"\",\n        hiddenCards:[]\n      }\n  }\n\n  selectCategory(value){\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/admin/contentsByCategory/\"+value)\n    .then( (response) => {\n      if (response.data.length > 0) {\n            let contents = response.data\n            this.props.changeContents(contents);\n      }\n      this.setState({\n        selectedItem:value\n      })  \n    });\n  }\n\n  onContentDragEnd(event,content){\n    if(event.dataTransfer.dropEffect !== 'none'){\n      var hiddenCards = this.state.hiddenCards\n      hiddenCards.push(content.identificador)\n      this.setState({\n        hiddenCards: hiddenCards\n      })\n      \n      if(this.state.selectedItem !== \"\"){ \n        this.selectCategory(this.state.selectedItem) \n      }\n      else{ \n        if(this.props.categories.length > 0)\n          this.selectCategory(this.props.categories[0]) \n        else\n          this.selectCategory(axios.get(\"https://alexa-apirest.herokuapp.com/users/getFirstCategory\")) \n      } \n    } \n  }\n\n\n  onContentDragStart(event,content){\n    event.dataTransfer.setData(JSON.stringify({contentId:content.contentId}), 'contentId');\n    event.dataTransfer.setData(JSON.stringify({identificador:content.identificador}), 'identificador');\n    event.dataTransfer.setData(JSON.stringify({categoria:content.categoria}), 'categoria');\n    event.dataTransfer.setData(JSON.stringify({isNavegable:content.available}), 'isNavegable');      \n  }\n\n  onContentClick(event,content){\n    if (!content.available){\n      axios.delete(\"https://alexa-apirest.herokuapp.com/users/deleteContentUnavailable\"\n      ,{ params: { id:content.contentId }},function(data){\n          window.open(content.url, \"_blank\")\n          window.location.reload()\n      });\n    }\n  }\n\n  generateStyles(index){\n    return(\n      {\n        position:\"relative\",\n        width:\"80%\",\n        border:\"1px solid\",\n        margin:\"0 auto\",\n        top:\"5px\"\n      }   \n    ) \n  }\n\n  render(){\n    const TabPane = Tabs.TabPane;\n    const {Option} = Select\n    const styles = this.generateStyles()\n    return(\n      <div className=\"no-assigned__cards__container\">\n        <Tabs>\n          <TabPane tab=\"Contents\" key=\"1\">\n            {this.props.categories.length > 0 &&\n              <div>\n              <h3 style={{color:\"white\",left:\"10px\"}}> Search by category </h3>\n              <Select value={this.state.selectedItem? this.state.selectedItem : undefined}  placeholder=\"Category\" \n                  onChange={(e) =>this.selectCategory(e)} style={styles}>\n                  {this.props.categories.map( (category, index) => {\n                    return(\n                        <Option \n                          key={index} \n                          value={category.toString()}>\n                            {category.toString()}\n                        </Option>\n                        )\n                    })\n                  }\n              </Select>\n              <br/>\n              <br/>\n              <br/>\n              </div>\n            }\n            \n            {this.props.contents.map((content,index) =>\n                <div\n                key={index} \n                onDragStart={(e) => this.onContentDragStart(e,content.contenidos)} \n                onDragEnd={(e) => this.onContentDragEnd(e,content.contenidos)}\n                onClick = {(e) => this.onContentClick(e,content.contenidos)}\n                >\n                  {!this.state.hiddenCards.find(hiddenCard => hiddenCard === content.contenidos.identificador) &&\n                    <MultiCard  \n                      identificador={content.contenidos.identificador} \n                      categoria={content.contenidos.categoria}\n                      cantidad={content.contenidos.contentId ? content.contenidos.contentId.length : null}\n                      available={content.contenidos.available} \n                    />\n                  }\n                </div>\n              \n          )}\n          </TabPane>\n          <TabPane tab=\"Skills\" key=\"2\">\n              <FluxTab \n                fluxes={this.props.fluxes}\n                addFluxToDiagram={this.props.addFluxToDiagram}  \n              />\n          </TabPane>          \n        </Tabs>\n      </div>\n    )\n  }\n\n}","export default class Content {\n\n  constructor(name, idContent, category, data){\n    this.name = name;\n    this.idContent = idContent\n    this.category = category\n    this.metadata = {}\n  }\n\n  getName(){\n    return this.name\n  }\n\n  getIdContent(){\n    return this.idContent\n  }\n\n  getCategory(){\n    return this.category\n  }\n\n  setName(name){\n    this.name = name;\n  }\n\n  setIdContent(idContent){\n    this.idContent = idContent;\n  }\n\n  setCategory(category){\n    this.category = category;\n  }\n\n  getData(){\n    return this.data\n  }  \n\n  setData(data){\n    var keys = Object.keys(data)\n    keys.map( k => this.metadata[k] = data[k] )\n  }\n\n  hasName(name) {\n    return this.getName().toLowerCase() === name.toLowerCase();\n  }\n\n}","import Content from './Content'\nexport default class FlowContent extends Content {\n    constructor(name, idContent, category, order){\n        super(name, idContent, category)\n        this.order = order\n    }\n\n    getOrder(){\n        return this.order\n    }\n\n    setOrder(order){\n        this.order = order\n    }\n\n} ","import Content from './Content'\nexport default class DroppableContent extends Content {\n    constructor(name, idContent, category, isNavegable){\n        super(name, idContent, category)\n        this.isNavegable = isNavegable\n    }\n\n    getisNavegable(){\n        return this.isNavegable\n    }\n\n    setIsNavegable(isNavegable){\n        this.isNavegable = isNavegable\n    }\n\n} ","export default class Link {\n\n  constructor(origin, destination){\n    this.origin = origin;\n    this.destination = destination;\n  }\n\n  getOriginContent(){\n    return this.origin;\n  }\n\n  getDestinationContent(){\n    return this.destination;\n  }\n\n  setOriginContent(content){\n    this.origin = content;\n  }\n\n  setDestinationContent(content){\n    this.destination = content;\n  }\n\n  hasOrigin(origin){\n    return this.origin.toLowerCase() === origin.toLowerCase();\n  }\n\n  hasDestination(destination){\n    return this.destination.toLowerCase() === destination.toLowerCase();\n  }\n\n  hasOriginAndDestination(origin, destination) {\n    return this.hasOrigin(origin) && this.hasDestination(destination)\n  }\n\n}","export default class RenderedState {\n\n    getOrderedContents(contents, links) {\n        let firstContent = this.getFirstContent(contents, links);\n        let nextContent = firstContent;\n        let orderedContents = [firstContent]\n        links.map( link => {\n        let auxLink = this.getLinkWithOrigin(links, nextContent);\n        nextContent = this.getContentByName(auxLink.destination, contents);\n        orderedContents.push(nextContent);\n        })\n        return orderedContents;     \n    }\n\n    getFirstContent(contents, links){ //returns the content that is no destination for any link but that is origin of one. contents out of the flow are ignored\n        return contents.filter( content => {\n          return links.filter( link => link.destination.toLowerCase() === content.getName().toLowerCase()).length === 0 &&\n                 links.filter( link => link.origin.toLowerCase() === content.getName().toLowerCase()).length === 1\n        })[0];\n      }\n\n      getLinkWithOrigin(links, content){\n        return links.filter(link => link.origin.toLowerCase() === content.getName().toLowerCase())[0]\n      }\n      \n      getContentByName(contentId, contents){\n        return contents.filter(content => content.hasName(contentId))[0]\n      }      \n\n}","export default class ImportedState {\n    getOrderedContents(contents, links) {\n        return contents.sort((content1,content2) => {return content1.getOrder() - content2.getOrder()})     \n    }\n}","import RenderedState from './RenderedState'\nimport ImportedState from './ImportedState'\n\nexport default class FlowState {\n    constructor(state){\n        switch (state) {\n            case 'rendered':\n                this.currentState = new RenderedState;\n                break;\n            default:\n                this.currentState = new ImportedState;\n                break;\n        }\n    }\n\n    changeState(state){\n        this.currentState = state === 'rendered' ? new RenderedState : new ImportedState;\n    }\n\n    getOrderedContents(contents, links){\n        return this.currentState.getOrderedContents(contents, links);\n    }\n\n}","import Link from './Link'\nimport FlowContent from './FlowContent';\nimport FlowState from './FlowState';\n\nexport default class Flow {\n\n  constructor(name, contents, links){\n    this.name = name;\n    this.contents = contents ? contents.map(content => new FlowContent(content.identificador, content.contentId, content.categoria, content.order)) : [];\n    this.links = links ? links : []\n    this.state = new FlowState();\n    return this;\n  }\n  \n  addLink(link){\n    this.links.push(link)\n  }\n  \n  removeLink(link){\n    this.setLinks(fluxLink => fluxLink !== link)\n  }\n\n  getLinks(){\n    return this.links;\n  }\n    \n  setLinks(links){\n    this.links = links\n  }\n  \n  getContents(){\n    return this.contents\n  }\n  \n  addContent(content){\n    this.contents.push(content)\n  }\n  \n  setContents(contents){\n    this.contents = contents\n  }\n  \n  removeContent(identificador){\n    this.setContents(this.contents.filter(content => !content.hasName(identificador)));\n  }\n\n  getOrderedLinks(){\n    let links = []\n    this.getOrderedContents().map( (content,i) => {\n      if (this.getOrderedContents()[i + 1]) {\n        let origin = content.getName()\n        let destination = this.getOrderedContents()[i + 1].getName()\n        links.push(new Link(origin, destination))\n      }\n    })\n    this.links = links\n    return links\n  }\n\n  relink(discardedNodeKey, subject){\n    let subjectFromLinkKey = subject.fromNode.data.key\n    let subjectToLinkKey = subject.toNode.data.key\n    if (this.links.filter(link => link.hasOriginAndDestination(subjectFromLinkKey, discardedNodeKey)).length > 0) {\n      this.removeLinkWithOriginAndDestination(subjectFromLinkKey, discardedNodeKey)\n    }\n    else{\n      if (this.links.filter(link => link.hasOriginAndDestination(discardedNodeKey, subjectFromLinkKey)).length > 0) {\n        this.removeLinkWithOriginAndDestination(discardedNodeKey, subjectToLinkKey)\n      }\n    }\n    this.addLink(new Link(subjectFromLinkKey, subjectToLinkKey))\n  }  \n\n  getOrderedContents(){\n    return this.state.getOrderedContents(this.contents, this.links)\n  }\n\n  \n  removeLinkWithOrigin(from){\n    this.setLinks(this.links.filter(link => !link.hasOrigin(from)))\n  }\n  \n  removeLinkWithDestination(to){\n    this.setLinks(this.links.filter(link => !link.hasDestination(to)))\n  }  \n\n  removeLinkWithOriginAndDestination(from, to){\n    this.setLinks(this.links.filter(link => !link.hasOriginAndDestination(from, to)))\n  }\n\n  addLinkWithOriginAndDestination(from, to){\n    this.addLink(new Link(from, to))\n  }\n\n  changeState(state){\n    this.state.changeState(state)\n  }\n\n  getContentByName(name){\n    return this.contents.filter(content => content.hasName(name))[0]\n  }\n\n\n}","import React, {Component} from 'react';\nimport go from 'gojs';\nimport {Button, Spin, Modal, Input, Select, Collapse, Icon, message,Checkbox, Radio} from 'antd'\nimport axios from 'axios'\nimport FlowContent from '../classes/FlowContent';\nimport DroppableContent from '../classes/DroppableContent';\nimport Flow from '../classes/Flow';\nconst goObj = go.GraphObject.make;\n\nexport default class GoJs extends Component {\n\n  constructor (props) {\n    super (props);\n    this.renderCanvas = this.renderCanvas.bind (this);\n    this.state = {\n      keyForRerender:0,\n      flux:null,\n      temporaryContent:null,\n      temporaryLink:null,\n      valueRadioNode:null,\n      valueCheck:false,\n      modalLinkVisible:false,\n      modalNodeVisible:false,\n      contents:[],\n      myModel: null, \n      myDiagram: null,\n      loading:false,\n      success:null,\n      error:null,\n      modalVisible:false,\n      inputValue:null,\n      inputValueText:null,\n      showSend:false,\n      pattern:null,\n      index:null,\n      addedContents:[],\n      patterns:[\"Read paragraph by paragraph\",\"Read a summary\"],\n      infoPatterns:[\"If the text of the contents defined is long, it will be read paragraph by paragraph\"\n      ,\"If the text of the contents defined is long, will be read a summary of it\"] \n    }\n    this.onDiagramEnter = this.onDiagramEnter.bind(this)\n    this.onDiagramDrop = this.onDiagramDrop.bind(this)\n    this.onDragOver = this.onDragOver.bind(this)\n    this.sendData = this.sendData.bind(this)\n    this.renderCanvas = this.renderCanvas.bind(this)\n    this.showSendDataModal = this.showSendDataModal.bind(this)\n    this.onChangeInput = this.onChangeInput.bind(this)\n    this.generateNodeTemplate = this.generateNodeTemplate.bind(this)\n    this.generateLinkTemplate= this.generateLinkTemplate.bind(this)\n  }\n\n  componentWillReceiveProps(props){\n    if (props.shouldShowFlux !== this.props.shouldShowFlux || props.flux !== this.props.flux) {\n      this.addContentsManually(props.flux);\n      console.log(this.state)\n    }\n  }\n\n  componentDidMount () {\n    this.renderCanvas ();\n  }\n\n  handlePattern(pattern){\n    var index;\n    switch(pattern){\n      case \"Read paragraph by paragraph\":\n        index = 0\n      break;\n      case \"Read a summary\":\n        index = 1\n      break;\n    }\n\n    this.setState({pattern,index})\n  }\n\n  generateNodeTemplate(){\n    var handlerThis = this;\n    let nodeTemplate = goObj(\n      go.Node,\n     \"Auto\",\n      {\n        doubleClick: function(e, node) {\n            // node is the Node that was double-clicked\n            let data = node.data;\n            let key = data.key\n            handlerThis.setState({\n              modalNodeVisible:true,\n              temporaryContent:key\n            })\n        }\n      },\n      new go.Binding('location'),\n      goObj(\n        go.Shape, \"RoundedRectangle\",\n        {\n          portId: \"\", \n          fromLinkable: true, \n          toLinkable: true,\n          toMaxLinks:1,\n          fromMaxLinks:1,\n          toLinkableSelfNode: false\n        },\n        new go.Binding(\"fill\", \"color\")\n      ),\n      goObj(\n        go.TextBlock,\n        { margin: 6, font: \"18px sans-serif\" },\n        new go.Binding(\"text\", \"identificador\")\n      )\n    )\n    return nodeTemplate;    \n  }\n\n  generateLinkTemplate(){\n    var handlerThis = this;\n    let linkTemplate = goObj(go.Link,\n      { curve: go.Link.Bezier },\n      {\n        doubleClick: function(e, link) {\n            // node is the Node that was double-clicked\n            let key = link.toNode.data.key;\n            handlerThis.setState({\n              modalLinkVisible:true,\n              temporaryLink:key\n            })\n        }\n      },\n      {relinkableFrom: true, relinkableTo: true},\n      goObj(go.Shape),  // the link shape\n      goObj(go.Shape,   // the arrowhead\n        { toArrow: \"OpenTriangle\", fill: null })\n    );\n    return linkTemplate\n  }\n\n\n  renderCanvas () {\n    let model = goObj(go.TreeModel)\n    let diagram = goObj(go.Diagram, this.refs.goJsDiv, {initialContentAlignment: go.Spot.Center});\n    diagram.addDiagramListener(\"LinkDrawn\", (ev) => {\n      this.state.flux.addLinkWithOriginAndDestination(ev.subject.fromNode.data.key, ev.subject.toNode.data.key);\n      this.setState({keyForRerender:Math.random()})\n    })\n    diagram.addDiagramListener(\"LinkRelinked\", (ev) => {\n      this.state.flux.relink(ev.parameter.part.key, ev.subject) // first param is the discarded node of the link, the second is the one that remains\n    })\n    diagram.addDiagramListener(\"SelectionDeleted\", (ev) => {\n      if (ev.subject.first().Yd.from) {\n        this.state.flux.removeLinkWithOriginAndDestination(ev.subject.first().Yd.from, ev.subject.first().Yd.to)      \n        this.setState({keyForRerender:Math.random()})\n      }\n      else{\n        this.state.flux.removeContent(ev.subject.first().part.data.key)\n        this.state.flux.removeLinkWithOrigin(ev.subject.first().part.data.key)\n        this.state.flux.removeLinkWithDestination(ev.subject.first().part.data.key)\n        this.setState({keyForRerender:Math.random()})\n      }\n    })\n    this.setModelAndDiagram(model, diagram)\n  \n  }\n\n  showSendDataModal(){\n    this.setState({modalVisible:true})\n  }\n\n  sendData(){\n        this.state.flux.changeState('rendered');\n        let contents = this.state.flux.getOrderedContents();\n        this.setState({loading:true})\n        let contentsToSend = {nombreConjunto:this.state.inputValue, pattern:this.state.pattern, contents:contents}\n        axios.post('https://alexa-apirest.herokuapp.com/users/createFlow', contentsToSend)\n        .then(() => {this.setState({\n          loading:false,success:\"success\", showSend:false})\n        })\n        .catch((error) => {\n          if (error.response && error.response.data) {\n            this.setState({\n              loading:false,\n              error:error.response.data\n            }, this.setState({\n              error:null\n            }))\n          }\n          else{\n            console.log(error)\n          }\n        })\n        this.setState({\n          modalVisible:false,\n        })\n  }\n  \n  setModelAndDiagram(model, diagram){\n    diagram.model = new go.GraphLinksModel([],[]);\n    diagram.nodeTemplate = this.generateNodeTemplate()\n    diagram.linkTemplate = this.generateLinkTemplate()\n    diagram.validCycle = go.Diagram.CycleDestinationTree;\n    this.setState({\n      myModel: model, \n      myDiagram: diagram\n    })    \n  }\n  \n  onDiagramEnter(event){\n    event.preventDefault();\n  }\n\n  getFlowContent(content){\n    return new FlowContent(content.identificador, content.contentId, content.categoria, content.order)\n  }\n\n  getDroppableContent(properties){ //crea el content object\n    let parsedContent1 = JSON.parse(properties[0].type)\n    let parsedContent2 = JSON.parse(properties[1].type)\n    let parsedContent3 = JSON.parse(properties[2].type)\n    let parsedContent4 = JSON.parse(properties[3].type)\n    const content = {...parsedContent1,...parsedContent2,...parsedContent3,...parsedContent4}\n    return new DroppableContent(content.identificador, content.contentid, content.categoria, content.isnavegable ) \n  }\n\n  isNotInDiagram(content){ //if the content is not in the diagram\n    return !this.state.addedContents.some(addedContent => JSON.stringify(addedContent.getIdContent()) === JSON.stringify(content.getIdContent()))\n  }\n\n\n  doesLinkApplies(link, oldContents){ //if the new link is related with any of the previous contents, then it should not be added\n    return !oldContents.some( content => link.origin.toLowerCase() === content.getName().toLowerCase() ||  link.destination.toLowerCase() === content.getName().toLowerCase() )\n  }\n\n  addContentToGoJsDiagram(content, fluxName, point){ //creates the content in the apps diagram\n    this.state.myDiagram.startTransaction('new node');\n    this.state.myDiagram.model.addNodeData({\n      key:content.getName(),\n      location:point,\n      identificador:fluxName !== \"\" ? fluxName + \" - \" + content.getName() : content.getName(),\n      color:go.Brush.randomColor()}\n      )\n      this.state.myDiagram.commitTransaction('new node');\n  }\n\n  addLinkToGoJsDiagram(link){ //creates the link in the apps diagram\n    this.state.myDiagram.startTransaction('new link');\n    this.state.myDiagram.model.addLinkDataCollection([{\n      from:link.origin,\n      to:link.destination\n    }])\n    this.state.myDiagram.commitTransaction('new link');\n  }\n\n\n  addContentsManually(flux){\n    let newFlux = new Flow(flux.name);\n    const oldContents = this.state.addedContents\n    flux.getOrderedContents().map( (content, i) => {\n      if (this.isNotInDiagram(content)) {\n        newFlux.addContent(content)\n        let point = this.state.myDiagram.transformViewToDoc(new go.Point(300 + i * 100 , 100 + (i * 100)));\n        this.addContentToGoJsDiagram(content,flux.name,point) //adds the content to the actual Diagram\n        this.setState(prevState => ({\n          addedContents:[...prevState.addedContents, content]\n        }))\n      }\n    })\n    flux.getOrderedLinks().map(link => {\n      if (this.doesLinkApplies(link,oldContents)) {\n        this.addLinkToGoJsDiagram(link)\n        newFlux.addLink(link)\n      }\n    })\n    if (this.state.flux) {\n      this.state.flux.contents.map( content => newFlux.addContent(content))\n      this.state.flux.links.map(link => newFlux.addLink(link))\n    }\n    this.setState({\n      flux:newFlux,\n      inputValue:flux.name\n    })\n  }\n\n  calculateDroppedPoint(event){\n    window.PIXELRATIO = this.state.myDiagram.computePixelRatio();\n    let pixelratio = window.PIXELRATIO;\n    let can = event.target;\n    // if the target is not the canvas, we may have trouble, so just quit:\n    if (!(can instanceof HTMLCanvasElement)) return;\n    var bbox = can.getBoundingClientRect();\n    var bbw = bbox.width;\n    if (bbw === 0) bbw = 0.001;\n    var bbh = bbox.height;\n    if (bbh === 0) bbh = 0.001;\n    var mx = event.clientX - bbox.left * ((can.width/pixelratio) / bbw);\n    var my = event.clientY - bbox.top * ((can.height/pixelratio) / bbh);\n    return this.state.myDiagram.transformViewToDoc(new go.Point(mx, my));\n  }\n  \n  \n  onDiagramDrop(event){\n    let content = this.getDroppableContent(event.dataTransfer.items)\n    if (this.isNotInDiagram(content)) { \n      if (this.state.flux === null) { //if a flux is not being edited in the application\n        let newFlux = new Flow('new flow');\n        newFlux.addContent(content)\n        this.setState({flux: newFlux})\n      }\n      else{ //if there is already a flux being edited\n        this.state.flux.addContent(content)\n      }\n      let point = this.calculateDroppedPoint(event); //calculates the drop event point\n      let {contents} = this.state\n      contents.push(content)\n      this.setState({contents})    \n      this.addContentToGoJsDiagram(content, \"\", point) //inserts the content in the diagram\n      this.setState(prevState => ({\n        addedContents:[...prevState.addedContents, content]\n      }))\n    }\n  }\n\n  onDragOver(event){\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n\n  success = () => {\n    message.success('A new skill was created!', 3 , function(){\n      window.location.reload()\n    });   \n  };\n\n  error = () => {\n    message.error('Some error occurred when trying to make a new skill', 3);\n  };\n  \n  onChangeInput(e){\n    this.setState({inputValue:e.target.value})\n  }\n\n  onChangeInputText = (e) =>{\n    this.setState({inputValueText:e.target.value})\n  }\n\n  \n  onChangeRadioNode = (e) =>{\n    this.setState({\n      valueRadioNode:e.target.value\n    })\n  }\n\n  onChangeCheckLink = (checkedValue) => {\n    this.setState({\n      valueCheck:checkedValue.target.checked\n    })\n  }\n\n  confirmNodeModal = () =>{\n    let contentNode = this.state.temporaryContent //name del nodo\n    this.state.flux.getContentByName(contentNode).setData({pattern:this.state.valueRadioNode})\n    this.setState({\n      modalNodeVisible:false,\n      temporaryContent:null,\n      valueRadioNode:null\n    })\n  }\n\n  confirmLinkModal = () =>{\n    let contentNode = this.state.temporaryLink //link.destination\n    this.state.flux.getContentByName(contentNode).setData({\n      metaInfo:this.state.inputValueText,\n      next:this.state.valueRadioLink\n    })\n    this.setState({\n      modalLinkVisible:false,\n      inputValueText:null,\n      temporaryLink:null\n  \t})\n  }\n\n  nodeModal(){\n    const radioStyle = {\n      display: 'block',\n      height: '30px',\n      lineHeight: '30px',\n    };\n    const RadioGroup = Radio.Group;\n    return(\n      <Modal\n        title=\"Node\"\n        centered = {true}\n        visible={this.state.modalNodeVisible}\n        onOk={this.confirmNodeModal}\n        onCancel={() => this.setState({modalNodeVisible:false,valueRadioNode:null,temporaryContent:null})}>\n        <div>\n          <p>Reading options:</p>\n          <Checkbox.Group options={['Title','Rating','Storyline']} defaultValue={['Title']} onChange={this.onChangeRadioNode} />\n          {/*<RadioGroup onChange={this.onChangeRadioNode} value={this.state.valueRadioNode}>\n            <Radio style={radioStyle} value={\"OnlyTitle\"}>Title</Radio>\n            <Radio style={radioStyle} value={\"All\"}>Rating</Radio>\n            <Radio style={radioStyle} value={\"New\"}>Storyline</Radio>\n          </RadioGroup>\n        */}\n        </div>             \n      </Modal>\n    )\n  }\n\n  linkModal(){\n    const RadioGroup = Radio.Group;\n    const radioStyle = {\n      display: 'block',\n      height: '30px',\n      lineHeight: '30px',\n    };\n    return(\n      <Modal\n      title=\"Link\"\n      visible={this.state.modalLinkVisible}\n      onOk={this.confirmLinkModal}\n      onCancel={() => this.setState({modalLinkVisible:false})}>\n      <div>\n        <p>How to continue?</p>\n        <Checkbox onChange={this.onChangeCheckLink}>\n            Read previous text\n            {this.state.valueCheck === true ? <Input placeholder=\"Text\" onChange={this.onChangeInputText} style={{ width: 100, marginLeft: 10 }} /> : null}\n        </Checkbox>\n        <RadioGroup onChange={this.onChangeRadioNode} value={1}>\n          <Radio style={radioStyle} value={1}>Read the next content directly</Radio>\n          <Radio style={radioStyle} value={2}>Ask for reading next</Radio>\n        </RadioGroup>\n      </div>\n    </Modal>\n    )\n  }\n  \n  submitModal(){\n    const customPanelStyle = {\n      background: '#f7f7f7',\n      borderRadius: 4,\n      marginBottom: 24,\n      border: 0,\n      overflow: 'hidden',\n      marginTop:\"20px\"\n    };\n    const {Option} = Select\n    const {Panel} = Collapse;\n    return(\n      <Modal\n        title=\"Confirm action\"\n        visible={this.state.modalVisible}\n        onOk={this.sendData}\n        onCancel={() => this.setState({modalVisible:false})}>\n          <div>\n            Please, entrer a name for the set of contents to send \n            <Input value={this.state.inputValue} style={{width:\"100px\", marginLeft:\"170px\",marginTop:\"20px\"}} onChange={this.onChangeInput}></Input> \n            <p> Select a content reading pattern </p>\n            <Select value={this.state.pattern? this.state.pattern : undefined} placeholder=\"Reading patterns\" onChange={(e) => this.handlePattern(e)} style={{width:\"230px\", marginLeft:\"130px\"}}>\n              {this.state.patterns.map( (pattern, index) => \n                <Option \n                  key={index}   \n                  value={pattern}>\n                    {pattern}\n                </Option>\n              )}\n            </Select>\n            { this.state.pattern &&\n              <Collapse bordered={false} defaultActiveKey={['0']} expandIcon={({ isActive }) => <Icon type=\"caret-right\" rotate={isActive ? 90 : 0}> </Icon>}>                \n                <Panel header={this.state.pattern} key=\"0\" style={customPanelStyle}>\n                  <p style={{ paddingLeft: 24 }}> {this.state.infoPatterns[this.state.index]} </p>\n                </Panel>\n              </Collapse>\n            }\n          </div>\n      </Modal>\n    )\n  }  \n\n  render () {\n    console.log(this.state.flux)\n    const goJsStyle = {'width': '116%','height': '874px', 'backgroundColor': \"white\",'marginLeft':\"-16%\"}\n    return(\n      <div>\n        {this.state.loading && <div className=\"example\"><Spin className=\"diagram-spin\" size=\"large\"/></div>}\n        <div onDragEnter={this.onDiagramEnter}  className=\"diagram\" onDrop={this.onDiagramDrop} onDragOver={this.onDragOver}>\n          <div  ref=\"goJsDiv\" style={goJsStyle}></div>\n        </div>\n        <div className=\"sendButtonContainer\">{ this.state.success ? this.success() : null }\n          <Button \n          className=\"sendButton\"         \n          onClick={this.showSendDataModal} key={this.state.keyForRerender} \n          disabled={!this.state.flux || (this.state.flux && this.state.flux.contents.length !== (this.state.flux.links.length + 1))}> \n            Deploy to skill\n          </Button>\n          {this.state.error && this.error()}\n        </div>\n        {this.nodeModal()}\n        {this.linkModal()}\n        {this.submitModal()}\n      </div>\n    ) \n  }\n}","import React from 'react'\nimport {Layout} from 'antd'\nimport LeftPanel from './LeftPanel'\nimport Diagram from './Diagram'\nimport axios from 'axios'\nimport Flow from '../classes/Flow'\n\nexport default class ContentAdmin extends React.Component{\n\n  constructor(props){\n    super(props)\n    this.state = {\n      showFluxContent: false,\n      diagramFluxId: false,\n      categories: [],\n      contents:[],\n      fluxes:[]\n    }\n    this.changeContents = this.changeContents.bind(this)\n    this.addFluxToDiagram = this.addFluxToDiagram.bind(this)\n  }\n\n  componentDidMount(){\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/categories\").then( (response) => {\n      if (response.data.length > 0) this.setState({categories:response.data}) \n    });\n\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/admin/contentsByFirstCategory\").then( (response) => {\n      if (response.data.length > 0) this.setState({contents:response.data})  \n    });\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/admin/contentsAndFlows\").then( (response) => {\n      let fluxes;\n      if (response.data.length > 0) {\n        fluxes = response.data.map(flux => {\n          return new Flow(flux._id, flux.contenidos)\n        })\n      }\n      this.setState({fluxes})  \n  })    \n  }\n\n  changeContents(newContents){\n    this.setState({contents:newContents})\n  }\n\n  addFluxToDiagram(flux){\n    this.setState({\n      showFluxContent:true,\n      diagramFlux: flux\n    })\n  }\n  \n  render(){\n\n    const {Header, Sider, Content} = Layout;\n       \n    return(\n      <div>\n        <Layout style={{height:\"1000px\"}}>\n        <Sider>\n          {this.state.contents.length > 0 && \n            <LeftPanel\n              changeContents={this.changeContents}\n              contents={this.state.contents}\n              fluxes={this.state.fluxes}\n              addFluxToDiagram={this.addFluxToDiagram}\n              categories={this.state.categories}\n              />\n          }\n        </Sider>\n        <Layout>\n          <Header style={{color:\"white\",fontSize:\"20px\"}}>SkillMaker</Header>\n          <Content>\n            <Diagram\n              shouldShowFlux={this.state.showFluxContent}\n              flux={this.state.diagramFlux}\n            />\n          </Content>\n        </Layout>\n        <Sider>\n        </Sider>\n      </Layout>\n      </div>\n    )\n  }\n\n}\n","import React, { Component } from 'react';\nimport ContentAdmin from './ContentAdmin';\nimport logo from '../logo.svg';\nimport './App.css';\nimport 'antd/dist/antd.css'\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <ContentAdmin/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}